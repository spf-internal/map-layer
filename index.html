<!DOCTYPE html>
<html>
<head>
  <title>Singapore Police NPC Boundaries (Google Maps)</title>
  <meta charset="utf-8" />

  <style>
    body { margin: 0; }
    #map { height: 100vh; width: 100%; }
  </style>
</head>

<body>
  <div id="map"></div>

  <script>
    function initMap() {
      // 1. Create the Google Map
      const map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 1.3521, lng: 103.8198 },
        zoom: 11,
        mapTypeId: "roadmap"
      });

      // 2. Load NPC boundaries directly from data.gov.sg (AUTO UPDATE)
      map.data.loadGeoJson(
        "https://api-open.data.gov.sg/v1/public/api/datasets/d_89b44df21fccc4f51390eaff16aa1fe8?format=geojson"
      );

      // 3. Style the NPC polygons
      map.data.setStyle({
        fillColor: "#0047AB",
        fillOpacity: 0.25,
        strokeColor: "#0047AB",
        strokeWeight: 2
      });

      // 4. Popup (InfoWindow) on click
      const infoWindow = new google.maps.InfoWindow();

      map.data.addListener("click", (event) => {
        const name = event.feature.getProperty("name") || "NPC";
        infoWindow.setContent("<b>NPC Name:</b> " + name);
        infoWindow.setPosition(event.latLng);
        infoWindow.open(map);
      });
    }
  </script>

  <!-- Google Maps JS API -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAAVHxiiNRNyih8droPsLasGtb8P28mmjs&callback=initMap"
    async
    defer>
  </script>

</body>
</html>
